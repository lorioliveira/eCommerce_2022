create database ecommerce;
use ecommerce;

select * from cliente;
select * from endereco;
select * from cartaoCredito;
select * from produto;
select * from carrinho;

/*update carrinho set status = "inativo" where id = 4;*/


create table cliente (
    id  BIGINT  NOT NULL    AUTO_INCREMENT,
    nome        VARCHAR(50),
    cpf         VARCHAR(14),
    dt_nasc     DATE,
    genero      VARCHAR(10),
    telefone    VARCHAR(12),
    email       VARCHAR(50),
    senha       VARCHAR(20),
    status      VARCHAR(10),
    tipo        VARCHAR(10),
    primary key (id)
);
create table endereco (
    id  BIGINT  NOT NULL    AUTO_INCREMENT,
    cep           VARCHAR(10),
    logradouro    VARCHAR(50),
    numero        VARCHAR(10),
    bairro        VARCHAR(30),
    cidade        VARCHAR(50),
    estado        VARCHAR(10),
    pais          VARCHAR(20),
    tipoResidencia    VARCHAR(20),
    observacoes   VARCHAR(20),
    tipoEndereco  VARCHAR(20),
    id_cliente BIGINT,
    primary key (id),
    CONSTRAINT fk_EnderecoCliente FOREIGN KEY (id_cliente) REFERENCES cliente (id)
);
create table cartaoCredito (
    id  BIGINT  NOT NULL    AUTO_INCREMENT,
    nCartao       VARCHAR(20),
    bandeira      VARCHAR(15),
    nome          VARCHAR(30),
    validade      VARCHAR(10),
    cvv           VARCHAR(5),
    preferencial  VARCHAR(10),
    id_cliente BIGINT,
    primary key (id),
    CONSTRAINT fk_CartaoCliente FOREIGN KEY (id_cliente) REFERENCES cliente (id)
);
create table produto (
    id  BIGINT  NOT NULL    AUTO_INCREMENT,
    nome              VARCHAR(40),
    descricao         VARCHAR(300),
    categoria         VARCHAR(20),
    cores             VARCHAR(50),
    tamanho           VARCHAR(20),
    precoCompra       VARCHAR(10),
    precoVenda        VARCHAR(10),
    qtdeEstoque       VARCHAR(10),
    foto              VARCHAR(50),
    dtCadastro        DATE,
    status            VARCHAR(10),
    grupoPrecificacao VARCHAR(30),
    primary key (id)
);
create table carrinho (
    id  BIGINT  NOT NULL    AUTO_INCREMENT,
    id_cliente      BIGINT,
    id_produto      BIGINT,
    qtdeProduto     VARCHAR(10),
    status          VARCHAR(10),
    primary key (id),
    CONSTRAINT fk_CarrinhoCliente FOREIGN KEY (id_cliente) REFERENCES cliente (id),
    CONSTRAINT fk_CarrinhoProduto FOREIGN KEY (id_produto) REFERENCES produto (id)
);

create table pedido (
    id   BIGINT  NOT NULL AUTO_INCREMENT,
    id_cliente   BIGINT,
    id_produto   BIGINT,
    qtdeProduto  VARCHAR(10),
    precoVenda   VARCHAR(10),
    precoTotalProduto VARCHAR(10),
    precoFrete   VARCHAR(10),
    desconto     VARCHAR(10),
    precoTotal   VARCHAR(10),
    statusPedido VARCHAR(30),
    primary key (id),
        CONSTRAINT fk_PedidoCliente FOREIGN KEY (id_cliente) REFERENCES cliente (id),
        CONSTRAINT fk_PedidoProduto FOREIGN KEY (id_produto) REFERENCES produto (id)
);

--------------------- APÓS MUDANÇA DE INFORMAÇÕES E INCLUSAO DO ITME PEDIDO ------------------------------------
create table pedido (
    id   BIGINT  NOT NULL AUTO_INCREMENT,
    precoTotalProduto VARCHAR(10),
    precoFrete   VARCHAR(10),
    precoTotal   VARCHAR(10),
    statusPedido VARCHAR(30),
    id_cliente   BIGINT,
    id_endereco  BIGINT,
    cartaoUsado  BIGINT,
    valorCartao  VARCHAR(10),
    desconto     VARCHAR(10),
    dt_pedido    date,
    primary key (id),
        CONSTRAINT fk_ClientePedido FOREIGN KEY (id_cliente) REFERENCES cliente (id),
        CONSTRAINT fk_EnderecoPedido FOREIGN KEY (id_endereco) REFERENCES endereco (id),
        CONSTRAINT fk_CartaoPedido FOREIGN KEY (cartaoUsado) REFERENCES cartaoCredito (id)
);
create table item_pedido (
    id   BIGINT  NOT NULL AUTO_INCREMENT,
    id_produto   BIGINT,
    nome         VARCHAR(40),
    qtdeProduto  VARCHAR(10),
    precoVenda   VARCHAR(10),
    id_pedido    BIGINT,
    dt_pedido date,
    primary key (id),
        CONSTRAINT fk_ProdutoItem FOREIGN KEY (id_produto) REFERENCES produto (id),
        CONSTRAINT fk_PedidoItem FOREIGN KEY (id_pedido) REFERENCES pedido (id)
);





drop table cliente;
drop table endereco;
drop table cartaoCredito;
drop table produto;
drop table carrinho;